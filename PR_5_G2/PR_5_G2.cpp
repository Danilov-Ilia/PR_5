#include <windows.h>
#include <stdio.h>
#include <conio.h>

int main()
{
    HANDLE hEvent = OpenEvent(EVENT_MODIFY_STATE, FALSE, TEXT("EventSync")); // ????????? ??????? ??? ????????????? ????? ??????????
    if (hEvent == NULL) { // ????????? ?? ?????? ????????
        printf("Error opening the event: %d\n", GetLastError());
        return 1;
    }

    printf("SLAVE: Started\n");

    char c;
    while (1) { // ??????????? ???? ??? ????? ???????? ? ????????? ???????
        c = _getch(); // ????????? ? ?????????? ?????? ??? ?????? ?? ?????

        printf("%c", c); // ??????? ?? ????? ?????????? ? ?????????? ??????

        SetEvent(hEvent); // ????????????? ???????

        fflush(stdout); // ????????????? ??????? ????? ??????

    }

    CloseHandle(hEvent); // ????????? ?????????? ???????

    return 0;
}